<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Installer</title>
    <style>
        body { font-family: Arial, sans-serif; background: #121212; color: #fff; text-align: center; padding: 50px; }
        button { padding: 10px 20px; font-size: 16px; margin-top: 20px; cursor: pointer; }
        #status { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Installer</h1>
    <p>Klicke auf "Installieren", um die aktuelle Version herunterzuladen.</p>
    <button id="installBtn">Installieren</button>
    <div id="status"></div>

    <script>
        const versionFile = 'version.json'; // auf dem Server verf端gbar

        async function install() {
            const status = document.getElementById('status');
            status.innerText = "Version pr端fen...";

            try {
                const res = await fetch(versionFile);
                const data = await res.json();

                const runUrl = data.runurl;
                const mainUrl = data.url;
                const version = data.version;

                status.innerText = `Lade Version ${version} herunter...`;

                // Download run.exe
                const runResp = await fetch(runUrl);
                const runBlob = await runResp.blob();
                const runLink = document.createElement('a');
                runLink.href = URL.createObjectURL(runBlob);
                runLink.download = 'run.exe';
                runLink.click();

                // Download main.exe
                const mainResp = await fetch(mainUrl);
                const mainBlob = await mainResp.blob();
                const mainLink = document.createElement('a');
                mainLink.href = URL.createObjectURL(mainBlob);
                mainLink.download = 'main.exe';
                mainLink.click();

                status.innerText = "Download abgeschlossen! Starte run.exe, um das Programm zu starten.";
            } catch (err) {
                console.error(err);
                status.innerText = "Fehler beim Herunterladen. Bitte 端berpr端fe deine Internetverbindung.";
            }
        }

        document.getElementById('installBtn').addEventListener('click', install);
    </script>
</body>
</html>
